---
import { type CollectionEntry } from 'astro:content';
import { Icon } from 'astro-icon/components';
import { Image } from 'astro:assets';

type Props = {
    post: CollectionEntry<'work'>;
    class?: string;
    preview?: 'prev' | 'next';
};

const { post, preview, class: ClassName } = Astro.props;
---

{
    post && (
        <a
            href={`/${post.collection}/${post.slug}/`}
            class="group grid grid-cols-1 gap-2 "
        >
            <span
                class:list={[
                    'flex w-full gap-1 text-base text-quiet',
                    preview === 'prev' && 'flex-row-reverse',
                ]}
            >
                <Icon
                    name={
                        preview === 'next'
                            ? 'lucide:chevron-left-square'
                            : 'lucide:chevron-right-square'
                    }
                    class="h-6 w-6"
                />
                {preview === 'next' ? 'Next:' : 'Previous:'}
            </span>

            <span class="relative block overflow-hidden rounded-tight pb-widescreen ">
                <Image
                    widths={[400]}
                    quality="high"
                    src={post.data.cover.src}
                    alt={post.data.title}
                    class="absolute inset-0 m-0 h-full w-full object-cover"
                />
            </span>
            <span>
                <h2
                    set:html={post.data.title}
                    class="capline font-bold text-accent group-hover:text-accent-light md:text-xl/tight"
                />
                <p class="text-base " set:html={post.data.excerpt} />
            </span>
        </a>
    )
}
