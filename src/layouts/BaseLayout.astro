---
import MainSEO, { type Props as HeadProps } from '~/components/SEO/Main.astro';
import Hero, { type Props as HeroProps } from '~/components/Hero/Hero.astro';
import { ViewTransitions } from 'astro:transitions';
// import Loader from "../components/Loader.astro";
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import Underlay from '../components/ui/Underlay.astro';
import CookieNotice from '../components/CookieNotice.astro';
import Shortcuts from '../components/Shortcuts.astro';
import Accessibility from '../components/Accessibility.astro';
import Overlay from '../components/ui/Overlay.astro';

export type hdProps = HeadProps;
export type hoProps = HeroProps;

// fm represents frontmatter
const fm = Astro.props.frontmatter || Astro.props;

const head: HeadProps = {
    title: fm.title,
    description: fm.description,
};

const hero: HeroProps = {
    title: fm.title,
    ...fm.hero, // Spread the hero properties
};

const isHeroDark = fm.isHeroDark ?? false;

// console.log('BL | isHeroDark:', isHeroDark);
// console.log(`BL | head | ${Astro.request.url}:`, head);
// console.log(`BL | hero| ${Astro.request.url}:`, hero);
import '~/styles/tailwind.css';
---

<!-- data-theme="dark" -->
<html
    lang="en"
    data-theme="light"
    data-hero={isHeroDark ? 'dark' : 'light'}
    class="relative h-full max-w-full scroll-pt-[var(--headerheight)] scroll-smooth"
>
    <head>
        <MainSEO {...head} {isHeroDark} />
        <!-- <ViewTransitions /> -->
    </head>
    <body
        class:list={[
            'relative flex min-h-screen max-w-full scroll-pt-[var(--headerheight)]  overflow-x-hidden bg-page  font-Roboto text-content antialiased',
        ]}
        x-data="{ pageTop: false, smNav: false, showOverlay: false, showUnderlay: false, }"
        x-ref="body"
        id="top"
    >
        <Accessibility />
        <!-- <Loader /> -->
        <div
            id="wrapper"
            class="grid w-full grid-cols-1 grid-rows-[auto,1fr,auto]"
        >
            <Header {isHeroDark} />
            <div class="bg-page outline-none">
                <slot name="hero">
                    <Hero {...hero} />
                </slot>

                <slot />
            </div>
            <Footer />
        </div>

        <Underlay {isHeroDark} />
        <CookieNotice />
        <Shortcuts />
        <Overlay class="bg-gray-800" />

        <style>
            /* Alpine.js
---------------------------------------------------------------------------------*/
            [x-cloak] {
                /* display: none !important; */
                visibility: hidden;
                opacity: 0;
            }
        </style>
    </body>
</html>
